<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Excetional Performance 团队总结出了一系列可以提高网站速度的方法。可以分为 7大类 35条。包括内容 、服务器 、 CSS 、 JavaScript 、Cookie 、图片 、移动应用 共七部分。 [TOC]  内容部分1、尽量减少HTTP请求终端用户响应的时间中，有 80%用于下载各项内容。这部分时间包括下载页面中的图像、样式表、脚本、 Flash等。通过减少页面中的元素可">
<meta property="og:type" content="article">
<meta property="og:title" content="YAHOO 35条前端优化建议（转）">
<meta property="og:url" content="http://yoursite.com/2020/04/11/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/index.html">
<meta property="og:site_name" content="Natsun Blog">
<meta property="og:description" content="Excetional Performance 团队总结出了一系列可以提高网站速度的方法。可以分为 7大类 35条。包括内容 、服务器 、 CSS 、 JavaScript 、Cookie 、图片 、移动应用 共七部分。 [TOC]  内容部分1、尽量减少HTTP请求终端用户响应的时间中，有 80%用于下载各项内容。这部分时间包括下载页面中的图像、样式表、脚本、 Flash等。通过减少页面中的元素可">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://graph.baidu.com/resource/126a7e144d2d8effd794d01586750769.jpg">
<meta property="article:published_time" content="2020-04-11T08:56:18.000Z">
<meta property="article:modified_time" content="2020-04-14T06:32:23.794Z">
<meta property="article:author" content="Xya Fred">
<meta property="article:tag" content="性能优化">
<meta property="article:tag" content="YAHOO军规">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://graph.baidu.com/resource/126a7e144d2d8effd794d01586750769.jpg">

<link rel="canonical" href="http://yoursite.com/2020/04/11/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>YAHOO 35条前端优化建议（转） | Natsun Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Natsun Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">留下记忆中的美好</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xya Fred">
      <meta itemprop="description" content="Welcome to Natsun Blog~">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Natsun Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          YAHOO 35条前端优化建议（转）
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-11 16:56:18" itemprop="dateCreated datePublished" datetime="2020-04-11T16:56:18+08:00">2020-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-14 14:32:23" itemprop="dateModified" datetime="2020-04-14T14:32:23+08:00">2020-04-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E4%BC%98%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">前端优化</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Excetional Performance 团队总结出了一系列可以提高网站速度的方法。可以分为 7大类 35条。包括内容 、服务器 、 CSS 、 JavaScript 、Cookie 、图片 、移动应用 共七部分。</p>
<p>[TOC]</p>
<hr>
<h3 id="内容部分"><a href="#内容部分" class="headerlink" title="内容部分"></a>内容部分</h3><h4 id="1、尽量减少HTTP请求"><a href="#1、尽量减少HTTP请求" class="headerlink" title="1、尽量减少HTTP请求"></a>1、尽量减少HTTP请求</h4><p>终端用户响应的时间中，有 80%用于下载各项内容。这部分时间包括下载页面中的图像、样式表、脚本、 Flash等。通过减少页面中的元素可以减少 HTTP请求的次数。这是提高网页速度的关键步骤。</p>
<p><strong>合并文件</strong>是通过把所有的脚本放到一个文件中来减少HTTP请求的方法，如可以简单地把所有的 CSS文件都放入一个样式表中。当脚本或者样式表在不同页面中使用时需要做不同的修 改，这可能会相对麻烦点，但即便如此也要把这个方法作为改善页面性能的重要一步。</p>
<p><strong>CSS Sprites</strong>是减少图像请求的有效方法。把所有的背景图像都放到一个图片文件中，然后通过 CSS的 background-image和 background-position属性来显示图片的不同部分图片地图是把多张图片整合到一张图片中。虽然文件的总体大小不会改变，但是可以减少 HTTP请求次数。图片地图只有在图片的所有组成部分在页面中是紧挨在一起的时候才能 使用，如导航栏。确定图片的坐标和可能会比较繁琐且容易出错，同时使用图片地图导航也不具有可读性，因此不推荐这种方法</p>
<p><strong>内联图像</strong>是使用 data:URL scheme的方法把图像数据加载页面中。这可能会增加页面的大 小。把内联图像放到样式表（可缓存）中可以减少 HTTP请求同时又避免增加页面文件的大小。但是内联图像现在还没有得到主流浏览器的支持。     </p>
<h4 id="2、减少DNS查找次数"><a href="#2、减少DNS查找次数" class="headerlink" title="2、减少DNS查找次数"></a>2、减少DNS查找次数</h4><p>域名系统建立了主机名和IP地址间的映射，就像电话簿上人名和号码的映射一样。当你在浏览器输入<a href="http://www.yahoo.com/" target="_blank" rel="noopener">www.yahoo.com</a>的时候，浏览器就会联系DNS解析器返回服务器的IP地址。DNS是有成本的，它需要20到120毫秒去查找给定主机名的IP地址。在DNS查找完成之前，浏览器无法从主机名下载任何东西。</p>
<p>DNS查找被缓存起来更高效，由用户的ISP（网络服务提供商）或者本地网络存在一个特殊的缓存服务器上，但还可以缓存在个人用户的计算机上。DNS信息被保存在操作系统的DNS   cache(微软Windows上的”DNS客户端服务”)里。大多数浏览器有独立于操作系统的自己的cache。只要浏览器在自己的cache里还保留着这条记录，它就不会向操作系统查询DNS。</p>
<p>IE默认缓存DNS查找30分钟，写在DnsCacheTimeout注册表设置中。Firefox缓存1分钟，可以用network.dnsCacheExpiration配置项设置。(Fasterfox把缓存时间改成了1小时  P.S. Fasterfox是FF的一个提速插件)</p>
<p>如果客户端的DNS cache是空的（包括浏览器的和操作系统的），DNS查找数等于页面上不同的主机名数，包括页面URL，图片，脚本文件，样式表，Flash对象等等组件中的主机名，减少不同的主机名就可以减少DNS查找。</p>
<p>减少不同主机名的数量同时也减少了页面能够并行下载的组件数量，避免DNS查找削减了响应时间，而减少并行下载数量却增加了响应时间。我的原则是把组件分散在2到4个主机名下，这是同时减少DNS查找和允许高并发下载的折中方案。</p>
<h4 id="3、避免重定向"><a href="#3、避免重定向" class="headerlink" title="3、避免重定向"></a>3、避免重定向</h4><p>重定向用301和302状态码，下面是一个有301状态码的HTTP头：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;HTTP&#x2F;1.1 301 Moved Permanently&#96;&#96;Location: http:&#x2F;&#x2F;example.com&#x2F;newuri&#96;&#96;Content-Type: text&#x2F;html&#96;</span><br></pre></td></tr></table></figure>

<p>浏览器会自动跳转到Location域指明的URL。重定向需要的所有信息都在HTTP头部，而响应体一般是空的。其实额外的HTTP头，比如Expires和Cache-Control也表示重定向。除此之外还有别的跳转方式：refresh元标签和JavaScript，但如果你必须得做重定向，最好用标准的3xxHTTP状态码，主要是为了让返回按钮能正常使用。</p>
<p>牢记重定向会拖慢用户体验，在用户和HTML文档之间插入重定向会延迟页面上的所有东西，页面无法渲染，组件也无法开始下载，直到HTML文档被送达浏览器。</p>
<p>有一种常见的极其浪费资源的重定向，而且web开发人员一般都意识不到这一点，就是URL尾部缺少一个斜线的时候。例如，跳转到<a href="http://astrology.yahoo.com/astrology会返回一个重定向到http://astrology.yahoo.com/astrology/的301响应（注意添在尾部的斜线）。在Apache中可以用Alias，mod_rewrite或者DirectorySlash指令来取消不必要的重定向。" target="_blank" rel="noopener">http://astrology.yahoo.com/astrology会返回一个重定向到http://astrology.yahoo.com/astrology/的301响应（注意添在尾部的斜线）。在Apache中可以用Alias，mod_rewrite或者DirectorySlash指令来取消不必要的重定向。</a></p>
<p>重定向最常见的用途是把旧站点连接到新的站点，还可以连接同一站点的不同部分，针对用户的不同情况（浏览器类型，用户帐号类型等等）做一些处理。用重定向来连接两个网站是最简单的，只需要少量的额外代码。虽然在这些时候使用重定向减少了开发人员的开发复杂度，但降低了用户体验。一种替代方案是用Alias和mod_rewrite，前提是两个代码路径都在相同的服务器上。如果是因为域名变化而使用了重定向，就可以创建一条CNAME（创建一个指向另一个域名的DNS记录作为别名）结合Alias或者mod_rewrite指令。</p>
<h4 id="4、让AJAX可缓存"><a href="#4、让AJAX可缓存" class="headerlink" title="4、让AJAX可缓存"></a>4、让AJAX可缓存</h4><p>Ajax的一个好处是可以<strong>给用户提供即时反馈</strong>，因为它能够从后台服务器异步请求信息。然而，用了Ajax就无法保证用户在等待异步JavaScript和XML响应返回期间不会非常无聊。在很多应用程序中，用户能够一直等待取决于如何使用Ajax。例如，在基于web的电子邮件客户端中，用户为了寻找符合他们搜索标准的邮件消息，将会保持对Ajax请求返回结果的关注。重要的是，要记得<strong>“异步”并不意味着“即时”</strong>。</p>
<p>要提高性能，优化这些Ajax响应至关重要。最重要的提高Ajax性能的方法就是让响应变得可缓存，就像在添上Expires或者Cache-Control HTTP头中讨论的一样。下面适用于Ajax的其它规则：</p>
<ul>
<li>Gzip组件</li>
<li>减少DNS查找</li>
<li>压缩JavaScript</li>
<li>避免重定向</li>
<li>配置ETags</li>
</ul>
<p>我们一起看看例子，一个Web  2.0的电子邮件客户端用了Ajax来下载用户的通讯录，以便实现自动完成功能。如果用户从上一次使用之后再没有修改过她的通讯录，而且Ajax响应是可缓存的，有尚未过期的Expires或者Cache-Control   HTTP头，那么之前的通讯录就可以从缓存中读出。必须通知浏览器，应该继续使用之前缓存的通讯录响应，还是去请求一个新的。可以通过给通讯录的Ajax   URL里添加一个表明用户通讯录最后修改时间的时间戳来实现，例如&amp;t=1190241612。如果通讯录从上一次下载之后再没有被修改过，时间戳不变，通讯录就将从浏览器缓存中直接读出，从而避免一次额外的HTTP往返消耗。如果用户已经修改了通讯录，时间戳也可以确保新的URL不会匹配缓存的响应，浏览器将请求新的通讯录条目。</p>
<h4 id="5、延迟加载组件"><a href="#5、延迟加载组件" class="headerlink" title="5、延迟加载组件"></a>5、延迟加载组件</h4><p>可以凑近看看页面并问自己：什么才是一开始渲染页面所必须的？其余内容都可以等会儿。</p>
<p>JavaScript是分隔onload事件之前和之后的一个理想选择。例如，如果有JavaScript代码和支持拖放以及动画的库，这些都可以先等会儿，因为拖放元素是在页面最初渲染之后的。其它可以延迟加载的部分包括隐藏内容（在某个交互动作之后才出现的内容）和折叠的图片。</p>
<p>工具可帮你减轻工作量：YUI Image Loader可以延迟加载折叠的图片，还有YUI Get utility是一种引入JS和CSS的简单方法。Yahoo!主页就是一个例子，可以打开Firebug的网络面板仔细看看。</p>
<p>最好让性能目标符合其它web开发最佳实践，比如“渐进增强”。如果客户端支持JavaScript，可以提高用户体验，但必须确保页面在不支持JavaScript时也能正常工作。所以，在确定页面运行正常之后，可以用一些延迟加载脚本增强它，以支持一些拖放和动画之类的华丽效果。</p>
<h4 id="6、预加载组件"><a href="#6、预加载组件" class="headerlink" title="6、预加载组件"></a>6、预加载组件</h4><p>预加载可能看起来和延迟加载是相反的，但它其实有不同的目标。通过预加载组件可以<strong>充分利用浏览器空闲的时间来请求将来会用到的组件</strong>（图片，样式和脚本）。用户访问下一页的时候，大部分组件都已经在缓存里了，所以在用户看来页面会加载得更快。</p>
<p>实际应用中有以下几种预加载的类型：</p>
<ol>
<li>无条件预加载——尽快开始加载，获取一些额外的组件。google.com就是一个sprite图片预加载的好例子，这个sprite图片并不是google.com主页需要的，而是搜索结果页面上的内容。</li>
<li>条件性预加载——根据用户操作猜测用户将要跳转到哪里并据此预加载。在search.yahoo.com的输入框里键入内容后，可以看到那些额外组件是怎样请求加载的。</li>
<li>提前预加载——在推出新设计之前预加载。经常在重新设计之后会听到：“这个新网站不错，但比以前更慢了”，一部分原因是用户访问先前的页面都是有旧缓存的，但新的却是一种空缓存状态下的体验。可以通过在将要推出新设计之前预加载一些组件来减轻这种负面影响，老站可以利用浏览器空闲的时间来请求那些新站需要的图片和脚本。</li>
</ol>
<h4 id="7、减少DOM元素的数量"><a href="#7、减少DOM元素的数量" class="headerlink" title="7、减少DOM元素的数量"></a>7、减少DOM元素的数量</h4><p>一个复杂的页面意味着要下载更多的字节，而且用JavaScript访问DOM也会更慢。举个例子，想要添加一个事件处理器的时候，循环遍历页面上的500个DOM元素和5000个DOM元素是有区别的。</p>
<p>大量的DOM元素是一种征兆——页面上有些内容无关的标记需要清理。正在用嵌套表格来布局吗？还是为了修复布局问题而添了一堆的<div>s？或许应该用更好的语义化标记。</p>
<p>YUI CSS utilities对布局有很大帮助：grids.css针对整体布局，fonts.css和reset.css可以用来去除浏览器的默认格式。这是个开始清理和思考标记的好机会，例如只在语义上有意义的时候使用<div>，而不是因为它能够渲染一个新行。</p>
<p>DOM元素的数量很容易测试，只需要在Firebug的控制台里输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;document.getElementsByTagName(&#39;*&#39;).length&#96;</span><br></pre></td></tr></table></figure>

<p>那么多少DOM元素才算是太多呢？可以参考其它类似的标记良好的页面，例如Yahoo!主页是一个相当繁忙的页面，但只有不到700个元素（HTML标签）。</p>
<h4 id="8、划分内容到不同域名"><a href="#8、划分内容到不同域名" class="headerlink" title="8、划分内容到不同域名"></a>8、划分内容到不同域名</h4><p>浏览器一般会限制每个域的并行线程（一般为6个，甚至更少），使用不同的域名可以最大化下载线程，但注意保持在2-4个域名内，以避免DNS查询损耗。</p>
<p>例如，动态内容放在<code>csspod.com</code>上，静态资源放在<code>static.csspod.com</code>上。这样还可以禁用静态资源域下的Cookie，减少数据传输，详见<code>Cookie 优化</code>。</p>
<h4 id="9、尽量少用iframe"><a href="#9、尽量少用iframe" class="headerlink" title="9、尽量少用iframe"></a>9、尽量少用iframe</h4><p>用iframe可以把一个HTML文档插入到父文档里，重要的是明白iframe是如何工作的并高效地使用它。</p>
<p><code>&lt;iframe&gt;</code>的优点：</p>
<ol>
<li>引入缓慢的第三方内容，比如标志和广告</li>
<li>安全沙箱</li>
<li>并行下载脚本</li>
</ol>
<p><code>&lt;iframe&gt;</code>的缺点：</p>
<ol>
<li>代价高昂，即使是空白的iframe</li>
<li>阻塞页面加载</li>
<li>非语义</li>
</ol>
<h4 id="10、杜绝404"><a href="#10、杜绝404" class="headerlink" title="10、杜绝404"></a>10、杜绝404</h4><p>HTTP请求代价高昂，完全没有必要用一个HTTP请求去获取一个无用的响应（比如404 Not Found），只会拖慢用户体验而没有任何好处。</p>
<p>有些站点用的是有帮助的404——“你的意思是xxx？”，这样做有利于用户体验，，但也浪费了服务器资源（比如数据库等等）。最糟糕的是链接到的外部JavaScript有错误而且结果是404。首先，这种下载将阻塞并行下载。其次，浏览器会试图解析404响应体，因为它是JavaScript代码，需要找出其中可用的部分。</p>
<h3 id="服务器部分"><a href="#服务器部分" class="headerlink" title="服务器部分"></a>服务器部分</h3><h4 id="11、使用CDN"><a href="#11、使用CDN" class="headerlink" title="11、使用CDN"></a>11、使用CDN</h4><p>用户与服务器的物理距离对响应时间也有影响。把内容部署在多个地理位置分散的服务器上能让用户更快地载入页面。但具体要怎么做呢？</p>
<p>网站80-90%响应时间消耗在资源下载上，减少资源下载时间是性能优化的黄金法则。相比分布式架构的复杂和巨大投入，静态内容分发网络（CDN）可以以较低的投入，获得加载速度有效提升。</p>
<p>内容分发网络（CDN）是一组分散在不同地理位置的web服务器，用来给用户更高效地发送内容。典型地，选择用来发送内容的服务器是基于网络距离的衡量标准的。例如：选跳数（hop）最少的或者响应时间最快的服务器。</p>
<h4 id="12、添加Expires或Cache-Control响应头"><a href="#12、添加Expires或Cache-Control响应头" class="headerlink" title="12、添加Expires或Cache-Control响应头"></a>12、添加Expires或Cache-Control响应头</h4><ul>
<li>静态内容：将 Expires 响应头设置为将来很远的时间，实现「永不过期」策略；</li>
<li>动态内容：设置合适的 Cache-Control 响应头，让浏览器有条件地发起请求。</li>
</ul>
<blockquote>
<p>Cache-Control头在HTTP/1.1规范中定义，取代了之前用来定义响应缓存策略的头（例如 Expires、Pragma）。当前的所有浏览器都支持Cache-Control，因此，使用它就够了。</p>
</blockquote>
<h4 id="13、启用Gzip"><a href="#13、启用Gzip" class="headerlink" title="13、启用Gzip"></a>13、启用Gzip</h4><p>前端工程师可以想办法明显地缩短通过网络传输HTTP请求和响应的时间。毫无疑问，终端用户的带宽速度，网络服务商，对等交换点的距离等等，都是开发团队所无法控制的。但还有别的能够影响响应时间的因素，压缩可以通过减少HTTP响应的大小来缩短响应时间。</p>
<p>Gzip压缩通常可以减少70%的响应大小，对某些文件更可能高达90%，比Deflate更高效。主流 Web 服务器都有相应模块，而且绝大多数浏览器支持gzip解码。所以，应该对HTML、CSS、JS、XML、JSON等文本类型的内容启用压缩。</p>
<blockquote>
<p><strong>注意!!!</strong> 图片和 PDF 文件不要使用 gzip。它们本身已经压缩过，再使用 gzip 压缩不仅浪费 CPU 资源，而且还可能增加文件体积。</p>
</blockquote>
<p>从HTTP/1.1开始，<strong>web客户端</strong>就有了支持压缩的Accept-Encoding HTTP请求头。</p>
<blockquote>
<p>Accept-Encoding: gzip, deflate</p>
</blockquote>
<p>如果web服务器看到这个请求头，它就会用客户端列出的一种方式来压缩响应。<strong>web服务器</strong>通过Content-Encoding响应头来通知客户端。</p>
<blockquote>
<p>Content-Encoding: gzip</p>
</blockquote>
<h4 id="14、配置ETag"><a href="#14、配置ETag" class="headerlink" title="14、配置ETag"></a>14、配置ETag</h4><p><strong>实体标签</strong>（ETags），是服务器和浏览器用来决定浏览器缓存中组件与源服务器中的组件是否匹配的一种机制（“实体”也就是组件：图片，脚本，样式表等等）。添加ETags可以提供一种<strong>实体验证机制</strong>，比最后修改日期更加灵活。一个ETag是一个字符串，作为一个组件某一具体版本的唯一标识符。唯一的格式约束是字符串必须用引号括起来，源服务器用相应头中的ETag来指定组件的ETag。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK</span><br><span class="line">      Last-Modified: Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line">      ETag: &quot;10c24bc-4ab-457e1c1f&quot;</span><br><span class="line">      Content-Length: 12195</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>然后，如果浏览器必须验证一个组件，它用If-None-Match请求头来把ETag传回源服务器。如果ETags匹配成功，会返回一个304状态码，这样就减少了12195个字节的响应体。Etag 通过文件版本标识，方便服务器判断请求的内容是否有更新，如果没有就响应 304，避免重新下载。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET &#x2F;i&#x2F;yahoo.gif HTTP&#x2F;1.1</span><br><span class="line">      Host: us.yimg.com</span><br><span class="line">      If-Modified-Since: Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line">      If-None-Match: &quot;10c24bc-4ab-457e1c1f&quot;</span><br><span class="line">      HTTP&#x2F;1.1 304 Not Modified</span><br></pre></td></tr></table></figure>

<h4 id="15、尽早输出（flush）缓冲"><a href="#15、尽早输出（flush）缓冲" class="headerlink" title="15、尽早输出（flush）缓冲"></a>15、尽早输出（flush）缓冲</h4><p>用户请求页面时，服务器通常需要花费200 ~ 500毫秒来组合 HTML 页面。在此期间，浏览器处于空闲、等待数据状态。使用PHP中的flush()函数，可以发送部分已经准备好的 HTML到浏览器，以便服务器还在忙于处理剩余页面时，浏览器可以提前开始获取资源。</p>
<p>可以考虑在<code>&lt;/head&gt;</code>之后输出一次缓冲，HTML head一般比较容易生成，先发送以便浏览器开始获取<code>&lt;head&gt;</code>里引用的CSS等资源。</p>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- css, js --&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;?php flush(); ?&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- content --&gt;</span><br></pre></td></tr></table></figure>

<h4 id="16、AJAX请求使用GET方法"><a href="#16、AJAX请求使用GET方法" class="headerlink" title="16、AJAX请求使用GET方法"></a>16、AJAX请求使用GET方法</h4><p>浏览器执行XMLHttpRequest POST请求时分成两步，先发送Http Header，再发送data。而GET只使用一个TCP数据包（Http Header与data）发送数据，所以首选GET方法。</p>
<p>根据HTTP规范，GET用于获取数据，POST则用于向服务器发送数据，所以Ajax请求数据时使用GET更符合规范。</p>
<h4 id="17、避免图片src为空"><a href="#17、避免图片src为空" class="headerlink" title="17、避免图片src为空"></a>17、避免图片src为空</h4><p>图片src属性值为空字符串可能以下面两种形式出现：</p>
<p>HTML:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src&#x3D;&quot;&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>JavaScript：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var img &#x3D; new Image(); </span><br><span class="line">img.src &#x3D; &quot;&quot;;</span><br></pre></td></tr></table></figure>

<p>虽然src属性为空字符串，但浏览器仍然会向服务器发起一个HTTP请求：</p>
<ul>
<li>IE 向页面所在的目录发送请求；</li>
<li>Safari、Chrome、Firefox向页面本身发送请求；</li>
<li>Opera不执行任何操作。</li>
</ul>
<p>空src产生请求的后果不容小觑：</p>
<ul>
<li>给服务器造成意外的流量负担，尤其时日 PV 较大时；</li>
<li>浪费服务器计算资源；</li>
<li>可能产生报错。</li>
</ul>
<blockquote>
<p>空的href属性也存在类似问题。用户点击空链接时，浏览器也会向服务器发送HTTP请求，可以通过JavaScript阻止空链接的默认的行为。</p>
</blockquote>
<h3 id="Cookie部分"><a href="#Cookie部分" class="headerlink" title="Cookie部分"></a>Cookie部分</h3><h4 id="18、减少cookie大小"><a href="#18、减少cookie大小" class="headerlink" title="18、减少cookie大小"></a>18、减少cookie大小</h4><p>Cookie被用于身份认证、个性化设置等诸多用途。Cookie通过HTTP头在服务器和浏览器间来回传送，减少Cookie大小可以降低其对响应速度的影响。</p>
<ul>
<li>去除不必要的 Cookie；</li>
<li>尽量压缩 Cookie 大小；</li>
<li>注意设置 Cookie 的 domain 级别，如无必要，不要影响到 sub-domain；</li>
<li>设置合适的过期时间。</li>
</ul>
<h4 id="19、静态资源使用无Cookie域名"><a href="#19、静态资源使用无Cookie域名" class="headerlink" title="19、静态资源使用无Cookie域名"></a>19、静态资源使用无Cookie域名</h4><p>静态资源一般无需使用Cookie，可以把它们放在使用二级域名或者专门域名的无Cookie服务器上，降低Cookie传送的造成的流量浪费，提高响应速度。</p>
<h3 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h3><h4 id="20、把样式表放在-lt-head-gt-中"><a href="#20、把样式表放在-lt-head-gt-中" class="headerlink" title="20、把样式表放在&lt;head&gt;中"></a>20、把样式表放在<code>&lt;head&gt;</code>中</h4><p>把样式表放在<code>&lt;head&gt;</code>中可以让页面渐进渲染，尽早呈现视觉反馈，给用户加载速度很快的感觉。</p>
<p>这对内容比较多的页面尤为重要，用户可以先查看已经下载渲染的内容，而不是盯着白屏等待。</p>
<p>如果把样式表放在页面底部，一些浏览器为减少重绘，会在 CSS 加载完成以后才渲染页面，用户只能对着白屏干瞪眼，用户体验极差。把样式表放到文档的HEAD部分能让页面看起来加载地更快。</p>
<h4 id="21、避免使用CSS表达式"><a href="#21、避免使用CSS表达式" class="headerlink" title="21、避免使用CSS表达式"></a>21、避免使用CSS表达式</h4><p>用CSS表达式动态设置CSS属性，是一种强大又危险的方式。从IE5开始支持，但从IE8起就不推荐使用了。例如，可以用CSS表达式把背景颜色设置成按小时交替的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-color: expression( (new Date()).getHours()%2 ? &quot;#B8D4FF&quot;: &quot;#F08A00&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="22、选择link舍弃-import"><a href="#22、选择link舍弃-import" class="headerlink" title="22、选择link舍弃@import"></a>22、选择<code>link</code>舍弃<code>@import</code></h4><p>前面提到了一个最佳实践：为了实现逐步渲染，CSS应该放在顶部。</p>
<p>在IE中用@import与在底部用<link>效果一样，所以最好不要用它。</p>
<h4 id="23、避免使用滤镜（filter）"><a href="#23、避免使用滤镜（filter）" class="headerlink" title="23、避免使用滤镜（filter）"></a>23、避免使用滤镜（filter）</h4><p>AlphaImageLoader为IE5.5-IE8专有的技术，和CSS表达式一样，放进博物馆吧。IE专有的AlphaImageLoader滤镜可以用来修复IE7之前的版本中半透明PNG图片的问题。在图片加载过程中，这个滤镜会阻塞渲染，卡住浏览器，还会增加内存消耗而且是被应用到每个元素的，而不是每个图片，所以会存在一大堆问题。</p>
<p><em>注意：这里说的不是CSS3 Filter</em></p>
<h3 id="JavaScript部分"><a href="#JavaScript部分" class="headerlink" title="JavaScript部分"></a>JavaScript部分</h3><h4 id="24、脚本放在页面底部"><a href="#24、脚本放在页面底部" class="headerlink" title="24、脚本放在页面底部"></a>24、脚本放在页面底部</h4><p>浏览器下载脚本时，会阻塞其他资源并行下载，即使是来自不同域名的资源。因此，最好将脚本放在底部，以提高页面加载速度。</p>
<p>一些特殊场景无法将脚本放到页面底部的，可以考虑<code>&lt;script&gt;</code>的以下属性：</p>
<ul>
<li>defer 属性；</li>
<li>HTML5 新增的async属性。</li>
</ul>
<h4 id="26、使用外部JavaScript和CSS"><a href="#26、使用外部JavaScript和CSS" class="headerlink" title="26、使用外部JavaScript和CSS"></a>26、使用外部JavaScript和CSS</h4><p>外部JavaScript和CSS文件可以被浏览器缓存，在不同页面间重用，也能降低页面大小。</p>
<p>当然，实际中也需要考虑代码的重用程度。如果仅仅是某个页面使用到的代码，可以考虑内嵌在页面中，减少HTTP请求数。另外，可以在首页加载完成以后，预先加载子页面的资源。</p>
<h4 id="27、压缩JavaScript和CSS"><a href="#27、压缩JavaScript和CSS" class="headerlink" title="27、压缩JavaScript和CSS"></a>27、压缩JavaScript和CSS</h4><p>压缩代码可以移除非功能性的字符（注释、空格、空行等），减少文件大小，提高载入速度。</p>
<p>使用快乐Webpack鸭！</p>
<h4 id="28、移除重复的脚本"><a href="#28、移除重复的脚本" class="headerlink" title="28、移除重复的脚本"></a>28、移除重复的脚本</h4><p>重复的脚本不仅产生不必要的HTTP请求，而且重复解析执行浪费时间和计算资源。</p>
<h4 id="29、尽量减少DOM访问"><a href="#29、尽量减少DOM访问" class="headerlink" title="29、尽量减少DOM访问"></a>29、尽量减少DOM访问</h4><p>用JavaScript访问DOM元素是很慢的，所以，为了让页面反应更迅速，应该：</p>
<ul>
<li>缓存已访问过的元素的索引</li>
<li>使用DocumentFragment暂存DOM，整理好以后再插入DOM树；</li>
<li>操作className，而不是多次读写style；</li>
<li>避免使用JavaScript修复布局。</li>
</ul>
<h4 id="30、使用高效的事件处理"><a href="#30、使用高效的事件处理" class="headerlink" title="30、使用高效的事件处理"></a>30、使用高效的事件处理</h4><ul>
<li>减少绑定事件监听的节点，如通过事件委托；</li>
<li>尽早处理事件，在DOMContentLoaded即可进行，不用等到load以后。</li>
</ul>
<h3 id="图片部分"><a href="#图片部分" class="headerlink" title="图片部分"></a>图片部分</h3><h4 id="31、优化图片"><a href="#31、优化图片" class="headerlink" title="31、优化图片"></a>31、优化图片</h4><p>尝试把GIF格式转换成PNG格式，看看是否节省空间。在所有的PNG图片上运行pngcrush（或者其它PNG优化工具）。</p>
<h4 id="32、优化CSS-Sprite"><a href="#32、优化CSS-Sprite" class="headerlink" title="32、优化CSS Sprite"></a>32、优化CSS Sprite</h4><p>水平排列Sprite中的图片，垂直排列会增加图片大小；</p>
<p>Spirite中把颜色较近的组合在一起可以降低颜色数，理想状况是低于256色以适用PNG8格式；</p>
<p>不要在Spirite的图像中间留有较大空隙。减少空隙虽然不太影响文件大小，但可以降低用户代理把图片解压为像素图的内存消耗，对移动设备更友好。</p>
<p>所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h4 id="33、不要在HTML中缩放图片"><a href="#33、不要在HTML中缩放图片" class="headerlink" title="33、不要在HTML中缩放图片"></a>33、不要在HTML中缩放图片</h4><p>不要使用<code>&lt;img&gt;</code>的width、height缩放图片，如果用到小图片，就使用相应大小的图片。如果需要</p>
<p><code>&lt;img width=&quot;100&quot; height=&quot;100&quot; src=&quot;mycat.jpg&quot; alt=&quot;My Cat&quot; /&gt;</code></p>
<p>那么图片本身（mycat.jpg）应该是100x100px的，而不是去缩小500x500px的图片。</p>
<blockquote>
<p>很多 CMS 和 CDN 都提供图片裁切功能。</p>
</blockquote>
<p><strong>补充</strong>：设置图片的宽和高，以免浏览器按照「猜」的宽高给图片保留的区域和实际宽高差异，产生重绘。</p>
<h4 id="34、使用体积小，可缓存的fabicon-ico"><a href="#34、使用体积小，可缓存的fabicon-ico" class="headerlink" title="34、使用体积小，可缓存的fabicon.ico"></a>34、使用体积小，可缓存的fabicon.ico</h4><p>Favicon.ico一般存放在网站根目录下，无论是否在页面中设置，浏览器都会尝试请求这个文件。</p>
<p>所以确保这个图标：</p>
<ul>
<li>存在（避免 404）；</li>
<li>尽量小，最好小于 1K；</li>
<li>设置较长的过期时间。</li>
</ul>
<blockquote>
<p>对于较新的浏览器，可以使用PNG格式的favicon。</p>
</blockquote>
<h3 id="移动端部分"><a href="#移动端部分" class="headerlink" title="移动端部分"></a>移动端部分</h3><h4 id="35、保证所有组件都小于25K"><a href="#35、保证所有组件都小于25K" class="headerlink" title="35、保证所有组件都小于25K"></a>35、保证所有组件都小于25K</h4><p>这个限制是因为iPhone不能缓存大于25K的组件，注意这里指的是未压缩的大小。这就是为什么缩减内容本身也很重要，因为单纯的gzip可能不够。</p>
<h4 id="36、打包内容为分段（multipart）文档"><a href="#36、打包内容为分段（multipart）文档" class="headerlink" title="36、打包内容为分段（multipart）文档"></a>36、打包内容为分段（multipart）文档</h4><p>把各个组件打包成一个像有附件的电子邮件一样的复合文档里，可以用一个HTTP请求获取多个组件（记住一点：HTTP请求是代价高昂的）。用这种方式的时候，要先检查用户代理是否支持（iPhone就不支持）。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>虽然YAHOO前端优化军规有如此之多，但经过分类，可以发现性能优化的切入点可以有以下几方面考虑：</p>
<ul>
<li><p>资源本身大小的压缩优化（想办法减少资源的体积）</p>
</li>
<li><p>网络请求的全过程（从URL请求到返回响应的每个环节）</p>
</li>
<li><p>浏览器渲染的全过程（拿到资源后浏览器渲染的每个环节）</p>
<p><img src="https://graph.baidu.com/resource/126a7e144d2d8effd794d01586750769.jpg" alt="前端性能优化思维导图"></p>
</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="tag"># 性能优化</a>
              <a href="/tags/YAHOO%E5%86%9B%E8%A7%84/" rel="tag"># YAHOO军规</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/04/10/Webpack%E7%AE%80%E5%8D%95%E6%8C%87%E5%8D%97/" rel="prev" title="Webpack简单指南">
      <i class="fa fa-chevron-left"></i> Webpack简单指南
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/04/12/Vue%E6%95%B0%E6%8D%AE%E5%8A%AB%E6%8C%81/" rel="next" title="Vue双向数据绑定">
      Vue双向数据绑定 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#内容部分"><span class="nav-number">1.</span> <span class="nav-text">内容部分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、尽量减少HTTP请求"><span class="nav-number">1.1.</span> <span class="nav-text">1、尽量减少HTTP请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、减少DNS查找次数"><span class="nav-number">1.2.</span> <span class="nav-text">2、减少DNS查找次数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、避免重定向"><span class="nav-number">1.3.</span> <span class="nav-text">3、避免重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、让AJAX可缓存"><span class="nav-number">1.4.</span> <span class="nav-text">4、让AJAX可缓存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、延迟加载组件"><span class="nav-number">1.5.</span> <span class="nav-text">5、延迟加载组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6、预加载组件"><span class="nav-number">1.6.</span> <span class="nav-text">6、预加载组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7、减少DOM元素的数量"><span class="nav-number">1.7.</span> <span class="nav-text">7、减少DOM元素的数量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8、划分内容到不同域名"><span class="nav-number">1.8.</span> <span class="nav-text">8、划分内容到不同域名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9、尽量少用iframe"><span class="nav-number">1.9.</span> <span class="nav-text">9、尽量少用iframe</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10、杜绝404"><span class="nav-number">1.10.</span> <span class="nav-text">10、杜绝404</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务器部分"><span class="nav-number">2.</span> <span class="nav-text">服务器部分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#11、使用CDN"><span class="nav-number">2.1.</span> <span class="nav-text">11、使用CDN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#12、添加Expires或Cache-Control响应头"><span class="nav-number">2.2.</span> <span class="nav-text">12、添加Expires或Cache-Control响应头</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#13、启用Gzip"><span class="nav-number">2.3.</span> <span class="nav-text">13、启用Gzip</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#14、配置ETag"><span class="nav-number">2.4.</span> <span class="nav-text">14、配置ETag</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#15、尽早输出（flush）缓冲"><span class="nav-number">2.5.</span> <span class="nav-text">15、尽早输出（flush）缓冲</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#16、AJAX请求使用GET方法"><span class="nav-number">2.6.</span> <span class="nav-text">16、AJAX请求使用GET方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#17、避免图片src为空"><span class="nav-number">2.7.</span> <span class="nav-text">17、避免图片src为空</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie部分"><span class="nav-number">3.</span> <span class="nav-text">Cookie部分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#18、减少cookie大小"><span class="nav-number">3.1.</span> <span class="nav-text">18、减少cookie大小</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#19、静态资源使用无Cookie域名"><span class="nav-number">3.2.</span> <span class="nav-text">19、静态资源使用无Cookie域名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS部分"><span class="nav-number">4.</span> <span class="nav-text">CSS部分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#20、把样式表放在-lt-head-gt-中"><span class="nav-number">4.1.</span> <span class="nav-text">20、把样式表放在&lt;head&gt;中</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#21、避免使用CSS表达式"><span class="nav-number">4.2.</span> <span class="nav-text">21、避免使用CSS表达式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#22、选择link舍弃-import"><span class="nav-number">4.3.</span> <span class="nav-text">22、选择link舍弃@import</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#23、避免使用滤镜（filter）"><span class="nav-number">4.4.</span> <span class="nav-text">23、避免使用滤镜（filter）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript部分"><span class="nav-number">5.</span> <span class="nav-text">JavaScript部分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#24、脚本放在页面底部"><span class="nav-number">5.1.</span> <span class="nav-text">24、脚本放在页面底部</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#26、使用外部JavaScript和CSS"><span class="nav-number">5.2.</span> <span class="nav-text">26、使用外部JavaScript和CSS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#27、压缩JavaScript和CSS"><span class="nav-number">5.3.</span> <span class="nav-text">27、压缩JavaScript和CSS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#28、移除重复的脚本"><span class="nav-number">5.4.</span> <span class="nav-text">28、移除重复的脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#29、尽量减少DOM访问"><span class="nav-number">5.5.</span> <span class="nav-text">29、尽量减少DOM访问</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#30、使用高效的事件处理"><span class="nav-number">5.6.</span> <span class="nav-text">30、使用高效的事件处理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#图片部分"><span class="nav-number">6.</span> <span class="nav-text">图片部分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#31、优化图片"><span class="nav-number">6.1.</span> <span class="nav-text">31、优化图片</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#32、优化CSS-Sprite"><span class="nav-number">6.2.</span> <span class="nav-text">32、优化CSS Sprite</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#33、不要在HTML中缩放图片"><span class="nav-number">6.3.</span> <span class="nav-text">33、不要在HTML中缩放图片</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#34、使用体积小，可缓存的fabicon-ico"><span class="nav-number">6.4.</span> <span class="nav-text">34、使用体积小，可缓存的fabicon.ico</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动端部分"><span class="nav-number">7.</span> <span class="nav-text">移动端部分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#35、保证所有组件都小于25K"><span class="nav-number">7.1.</span> <span class="nav-text">35、保证所有组件都小于25K</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#36、打包内容为分段（multipart）文档"><span class="nav-number">7.2.</span> <span class="nav-text">36、打包内容为分段（multipart）文档</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">8.</span> <span class="nav-text">总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Xya Fred"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Xya Fred</p>
  <div class="site-description" itemprop="description">Welcome to Natsun Blog~</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xya Fred</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
</html>
